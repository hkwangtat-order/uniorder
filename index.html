<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta property="og:title" content="æµ·è†½ä»” - å°ˆç”¨é›»å­è½å–®è¡¨">
    <meta property="og:description" content="é¦™æ¸¯å®é”æœ‰é™å…¬å¸æä¾›">
    <title>æµ·è†½ä»” - å°ˆç”¨è¨‚è²¨å–®</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: #f8f9fa; padding-bottom: 120px; }
        
        /* é ‚éƒ¨å®¢è£½åŒ– */
        .top-bar { background-color: #212529; color: white; padding: 15px; position: sticky; top: 0; z-index: 1020; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
        .client-name { font-size: 1.3rem; font-weight: 800; color: #ffc107; } 
        
        /* å°èˆªæŒ‰éˆ• */
        .nav-scroller { overflow-x: auto; white-space: nowrap; padding: 10px 10px 0 10px; background: white; border-bottom: 1px solid #ddd; position: sticky; top: 70px; z-index: 990; }
        .nav-btn { display: inline-block; padding: 8px 16px; margin-right: 8px; margin-bottom: 10px; border-radius: 20px; border: 1px solid #ccc; color: #333; text-decoration: none; font-size: 0.95rem; background: #fff; font-weight: 600; transition: all 0.2s; }
        .nav-btn.active { background: #212529; color: #ffc107; border-color: #212529; }

        /* æœå°‹æ¡† */
        .search-section { background-color: #f8f9fa; padding: 10px 15px; border-bottom: 1px solid #ddd; }
        .search-wrapper { position: relative; }
        .search-input { border-radius: 20px; border: 1px solid #ccc; padding: 8px 35px 8px 15px; width: 100%; }
        .btn-clear-search { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #adb5bd; cursor: pointer; font-size: 1.1rem; display: none; z-index: 10; }

        /* åˆ†é¡æ¨™é¡Œ */
        .category-header { background-color: #fff3cd; color: #212529; font-weight: 800; font-size: 1.1rem; padding: 10px 15px; border-left: 6px solid #ffc107; margin-top: 0; scroll-margin-top: 130px; }
        
        /* ç”¢å“åˆ—è¡¨ */
        .product-row { background: white; border-bottom: 1px solid #eee; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; }
        .p-info { flex: 1; padding-right: 10px; overflow: hidden; }
        .p-name { font-size: 1.1rem; font-weight: 700; color: #000; line-height: 1.3; margin-bottom: 2px; }
        .p-cat-label { font-size: 0.75rem; color: #999; }
        
        /* æ•¸é‡æ§åˆ¶ */
        .qty-control { display: flex; align-items: center; background: #fff; border: 1px solid #ced4da; border-radius: 8px; width: 120px; justify-content: space-between; height: 38px; flex-shrink: 0; overflow: hidden; }
        .qty-btn { width: 35px; height: 100%; border-radius: 0; background: #f8f9fa; color: #212529; display: flex; align-items: center; justify-content: center; cursor: pointer; font-weight: bold; font-size: 1.2rem; user-select: none; border: none; }
        .qty-btn:active { background: #ffc107; }
        .qty-input { width: 50px; text-align: center; border: none; font-weight: bold; font-size: 1.1rem; color: #333; background: transparent; padding: 0; }
        
        /* é¸ä¸­æ¨£å¼ */
        .product-row.selected { background-color: #fff9db; border-left: 5px solid #ffc107; }

        /* åº•éƒ¨çµå¸³æ¬„ (Standard V6 Style) */
        .bottom-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; box-shadow: 0 -4px 15px rgba(0,0,0,0.15); padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; z-index: 1030; gap: 10px; }
        .total-box { font-size: 1.1rem; font-weight: bold; color: #333; }
        .total-num { color: #d32f2f; font-size: 1.4rem; padding: 0 3px; }
        
        /* æŒ‰éˆ•æ¨£å¼ */
        .btn-view-cart { background-color: #6c757d; color: white; border: none; padding: 10px 18px; border-radius: 50px; font-weight: bold; font-size: 0.95rem; white-space: nowrap; transition: all 0.3s ease; }
        .btn-view-cart.active { background: linear-gradient(45deg, #ff9800, #ff5722); box-shadow: 0 4px 12px rgba(255, 87, 34, 0.4); transform: scale(1.05); }
        .btn-whatsapp { background-color: #25D366; color: white; border: none; padding: 10px 20px; border-radius: 50px; font-weight: bold; font-size: 1.1rem; flex-grow: 1; display: flex; align-items: center; justify-content: center; gap: 5px; box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3); }

        /* Modal Styles */
        .modal-header { background-color: #212529; color: white; }
        .modal-title { font-weight: bold; color: #ffc107; }
    </style>
</head>
<body>

<div class="sticky-header-container">
    <div class="top-bar d-flex justify-content-between align-items-center">
        <div>
            <div class="client-name">æµ·è†½ä»”</div>
            <div style="font-size: 0.8rem; color: #ccc;">A2888</div>
        </div>
        <div style="text-align: right; font-size: 0.8rem; color: #ccc;">
            å®é”æ‰¹ç™¼<br>Tel: 63771688
        </div>
    </div>

    <div class="nav-scroller" id="navContainer"></div>

    <div class="search-section">
        <div class="search-wrapper">
            <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” æœå°‹ç”¢å“..." oninput="filterProducts()">
            <i class="bi bi-x-circle-fill btn-clear-search" id="clearSearchBtn" onclick="clearSearch()"></i>
        </div>
    </div>
</div>

<div id="product-list" style="padding-top: 10px;"></div>

<div class="bottom-bar">
    <div class="total-box">
        å…± <span id="totalQty" class="total-num">0</span> æ¬¾
    </div>
    <button id="viewCartBtn" class="btn-view-cart" onclick="openCartModal()" disabled>
        <i class="bi bi-cart3"></i> æŸ¥çœ‹å·²é¸
    </button>
    <button class="btn-whatsapp" onclick="sendWhatsApp()">
        <i class="bi bi-whatsapp"></i> ç™¼é€è¨‚å–®
    </button>
</div>

<div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">å·²é¸ç”¢å“æ¸…å–®</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="cartModalBody"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger me-auto" onclick="clearCart()">
                    <i class="bi bi-trash"></i> æ¸…ç©º
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ç¹¼çºŒé¸è³¼</button>
                <button type="button" class="btn btn-success" onclick="sendWhatsApp()">ç¢ºèªç™¼é€</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const customerName = "æµ·è†½ä»”";
    const customerCode = "A2888";

    // === ç”¢å“æ•¸æ“šåº« ===
    const products = [
        { name: "ä¸‰æ–‡é­š", cat: "ä¸€ã€ç”Ÿé®®é­š" }, { name: "æ²¹ç”˜é­š", cat: "ä¸€ã€ç”Ÿé®®é­š" }, { name: "é­šç®±", cat: "ä¸€ã€ç”Ÿé®®é­š" }, { name: "ç”Ÿãƒˆå£", cat: "ä¸€ã€ç”Ÿé®®é­š" },
        { name: "ä¸‰æ–‡é­šç±½", cat: "äºŒã€å‡è²¨" }, { name: "é±’é­šç±½", cat: "äºŒã€å‡è²¨" }, { name: "å¸¶å­3S", cat: "äºŒã€å‡è²¨" }, { name: "Mç¢¼å¸¶å­", cat: "äºŒã€å‡è²¨" }, { name: "å·¦å£é­šé‚ŠIK", cat: "äºŒã€å‡è²¨" }, { name: "éµè‚", cat: "äºŒã€å‡è²¨" }, { name: "ç‰¡ä¸¹è¦", cat: "äºŒã€å‡è²¨" }, { name: "èµ¤è¦L1", cat: "äºŒã€å‡è²¨" }, { name: "ç”˜è¦3L", cat: "äºŒã€å‡è²¨" }, { name: "ç½è£èŸ¹è‚‰", cat: "äºŒã€å‡è²¨" }, { name: "è¶Šæ²³èŸ¹è†", cat: "äºŒã€å‡è²¨" }, { name: "èŸ¹è“‹", cat: "äºŒã€å‡è²¨" }, { name: "ç†Ÿå¸çš‡èŸ¹è…³4L", cat: "äºŒã€å‡è²¨" }, { name: "èŸ¹å­", cat: "äºŒã€å‡è²¨" }, { name: "æ‹–ç¾…ç¢", cat: "äºŒã€å‡è²¨" }, { name: "ç©´å­", cat: "äºŒã€å‡è²¨" }, { name: "å¤§å´èŸ¹æŸ³", cat: "äºŒã€å‡è²¨" }, { name: "ç†Ÿç†’å…‰é­·é­š300g", cat: "äºŒã€å‡è²¨" }, { name: "æ€¥å‡èŠ¥è¾£", cat: "äºŒã€å‡è²¨" }, { name: "ç´…ç¶ é›å† ", cat: "äºŒã€å‡è²¨" }, { name: "é±˜é­šç±½", cat: "äºŒã€å‡è²¨" }, { name: "é»‘èŸ¹å­", cat: "äºŒã€å‡è²¨" }, { name: "å‘³ä»˜å¢¨é­šä»”2K", cat: "äºŒã€å‡è²¨" }, { name: "å‘³ä»˜èºè‚‰2K", cat: "äºŒã€å‡è²¨" }, { name: "ä¸­è¯æ²™å¾‹2K", cat: "äºŒã€å‡è²¨" }, { name: "å¸¶å­ç¾¤é‚Š2K", cat: "äºŒã€å‡è²¨" }, { name: "èŠéº»å…«çˆªé­š2K", cat: "äºŒã€å‡è²¨" }, { name: "è’œé ­æ½°", cat: "äºŒã€å‡è²¨" }, { name: "å¤§å…«çˆªé­šæ—¥æœ¬", cat: "äºŒã€å‡è²¨" }, { name: "å£½å¸åšè›‹", cat: "äºŒã€å‡è²¨" }, { name: "ç£¯ç…®é®‘é­š", cat: "äºŒã€å‡è²¨" }, { name: "ç²Ÿç±³ç²’", cat: "äºŒã€å‡è²¨" }, { name: "é®Ÿé±‡é­šè‚", cat: "äºŒã€å‡è²¨" }, { name: "å‡æŸšå­çš®", cat: "äºŒã€å‡è²¨" }, { name: "ç¿¡ç¿ èº", cat: "äºŒã€å‡è²¨" }, { name: "æ‹–ç¾…æ²¹", cat: "äºŒã€å‡è²¨" },
        { name: "èµ¤èºç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "æ¦®èºç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "å£½å¸èµ¤è¦8L", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "ç„¡é ­ç”œè¦1L", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "è™è¦10g", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "æµ·è†½è¦", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "ç»ç’ƒè¦3L", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "ç†Ÿè¦8L", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "é­·é­šç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "ç´‹ç”²é­·é­šæ—¥æœ¬", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "ç†Ÿå¸†ç«‹è²é–‹é‚Š", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "è±¡æ‹”èšŒ", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "åŒ—å¯„è²ç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "èµ¤è²ç‰‡8g", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "é¦¬åˆ€è²10g", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "å…«çˆªé­šç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "KKèŸ¹æ£’", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "é°»é­šç‰‡8g", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "å¸Œéˆé­š6", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "é†‹é’é­š", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "ä¸‰è§’ä»˜çš®", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "èŠå£«ç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "å°å°¼ä¸­æ‹–ç¾…", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "æµ·è†½é­·é­š", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "é»ƒé‡‘é­·é­š", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "æ«»èŠ±é­·é­š", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "èŠ¥è¾£å…«çˆªé­š", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "èŠå£«èŸ¹å­", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "æ˜å¤ªå­æ²™å¾‹", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "é¾è¦æ²™å¾‹", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "èŠéº»æ¼¬", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "è–„é¤…", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "å’Œç‰›ç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" }, { name: "æ± é­šç‰‡", cat: "ä¸‰ã€å£½å¸å‡è²¨" },
        { name: "ç«¹è‘‰", cat: "å››ã€ä¹¾è²¨" }, { name: "å¤§è‘‰", cat: "å››ã€ä¹¾è²¨" }, { name: "å°èŠ", cat: "å››ã€ä¹¾è²¨" }, { name: "ç´…ç¶ æ¥“è‘‰", cat: "å››ã€ä¹¾è²¨" }, { name: "QPæ²™å¾‹æ±", cat: "å››ã€ä¹¾è²¨" }, { name: "å’Œé¢¨æ²™å¾‹æ±", cat: "å››ã€ä¹¾è²¨" }, { name: "è’²ç‡’é°»é­šæ±", cat: "å››ã€ä¹¾è²¨" }, { name: "æŸšå­é†‹", cat: "å››ã€ä¹¾è²¨" }, { name: "é¦™è’œç‰›æ²¹æ±", cat: "å››ã€ä¹¾è²¨" }, { name: "ç™½èŠéº»", cat: "å››ã€ä¹¾è²¨" }, { name: "912ä¿é®®ç´™", cat: "å››ã€ä¹¾è²¨" }, { name: "ç¶¿ç´™", cat: "å››ã€ä¹¾è²¨" }, { name: "å£½å¸æ‰‹å¥—S", cat: "å››ã€ä¹¾è²¨" }, { name: "å£½å¸æ‰‹å¥—M", cat: "å››ã€ä¹¾è²¨" }, { name: "å£½å¸æ‰‹å¥—L", cat: "å››ã€ä¹¾è²¨" }, { name: "ä¸æ™´æ‰‹å¥—S", cat: "å››ã€ä¹¾è²¨" }, { name: "ä¸æ™´æ‰‹å¥—M", cat: "å››ã€ä¹¾è²¨" }, { name: "ä¸æ™´æ‰‹å¥—L", cat: "å››ã€ä¹¾è²¨" }, { name: "å¤§ç´«èœ", cat: "å››ã€ä¹¾è²¨" }, { name: "ç´«èœçµ²", cat: "å››ã€ä¹¾è²¨" }, { name: "ç‰›è’¡æ¼¬", cat: "å››ã€ä¹¾è²¨" }, { name: "åˆæˆé†‹", cat: "å››ã€ä¹¾è²¨" }, { name: "å£½å¸å§œ", cat: "å››ã€ä¹¾è²¨" }, { name: "ç´…è‘‰è¾£æ¤’é†¬", cat: "å››ã€ä¹¾è²¨" }, { name: "æœé®®é†¬æ¡ƒå±‹", cat: "å››ã€ä¹¾è²¨" }, { name: "ç¾…ç™½", cat: "å››ã€ä¹¾è²¨" }, { name: "ä¸Šç™½ç³–", cat: "å››ã€ä¹¾è²¨" }, { name: "æ—¥æœ¬é¹½", cat: "å››ã€ä¹¾è²¨" }, { name: "77æ¶ˆæ¯’è—¥æ°´", cat: "å››ã€ä¹¾è²¨" }, { name: "è°·ç‰©é†‹", cat: "å››ã€ä¹¾è²¨" }, { name: "è»è‰¦ç´«èœ", cat: "å››ã€ä¹¾è²¨" }, { name: "ä¸‰æ”¯è‘‰", cat: "å››ã€ä¹¾è²¨" }, { name: "ç™½æ˜†å¸ƒæœ¨é­šæ±", cat: "å››ã€ä¹¾è²¨" }, { name: "è–„é¤…", cat: "å››ã€ä¹¾è²¨" },
        { name: "æ²–ç¹©å•¤é…’Orion", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "çºç¥­720ml", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "äº¬å§¬åŒ å¤§åŸ 720ml", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "å¤§å¶ºä¸‰ç²’ç±³720ml", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "åŸå‘³æ³¢å­æ±½æ°´", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "è è˜¿å‘³æ³¢å­æ±½æ°´", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "è—è“æ³¢å­æ±½æ°´", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "æœ¨æ‘å“ˆå¯†ç“œæ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "æœ¨æ‘æ°´èœœæ¡ƒæ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "å¯Œå£«å±±æŸšå­æ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ç½è£æå­æ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ç½è£æ©™å‘³æ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ç½è£åŸå‘³æ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ç½è£å“ˆå¯†ç“œæ¢³æ‰“", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "å¤–è³£åŒ…è£è±‰æ²¹", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "å¤–è³£åŒ…è£ä»‹è¾£", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ç„ç±³èŒ¶", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "å¤§éº¥èŒ¶åŒ…", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "æŸšå­èœœæ¨½", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "åŸå‘³æ³¡èŠ™", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "æœ±å¤åŠ›æ³¡èŠ™", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "èŠå£«è›‹ç³•", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ç´…è±†æœå­", cat: "äº”ã€é£²å“ã€ç”œå“" }, { name: "ä¸ƒå‘³ç²‰åŒ…è£", cat: "äº”ã€é£²å“ã€ç”œå“" },
        { name: "ç´…é»‘ç¢—ï¼ˆåŠ è“‹ï¼‰", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æ²™å¾‹å…œï¼ˆåŠ è“‹ï¼‰", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "è±‰æ²¹å…œé€£è“‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "é­šç”Ÿåœ“å½¢æ³¢æ³¢ç¢—ï¼ˆåŠ è“‹ï¼‰", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ç™½è‰²æ¹¯éºµç¢—å…©æ ¼ (é è¨‚æ·˜å¯¶)", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ç‚¸ç‰©å°é£Ÿç´™ç›’ (ç´°)", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ç‚¸ç‰©å°é£Ÿç´™ç›’ (å¤§)", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "XYW00 å£½å¸ç›’+è“‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "XYW01 å£½å¸ç›’+è“‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "XYW02 å£½å¸ç›’+è“‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "XYW05 å£½å¸ç›’+è“‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’æ­£æ–¹å½¢å¥—è£ (å¤§27x27) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’æ­£æ–¹å½¢å¥—è£ (ä¸­24x24) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’æ­£æ–¹å½¢å¥—è£ (å°18x18) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’é•·æ–¹å½¢å¥—è£ (å¤§175 x 235) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’é•·æ–¹å½¢å¥—è£ (ä¸­120 x 162) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’é•·æ–¹å½¢å¥—è£ (å°85 x 200) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æœ¨ç›’é•·æ–¹å½¢å¥—è£ (åŠ å°85 x 150) mm", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ä¿æº«è¢‹é»è† ç´™å°ç¢¼", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ä¿æº«è¢‹é»è† ç´™å¤§ç¢¼", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ä¿æº«è¢‹æ‹‰éŠé‡‘è‰²é‚Šå¤§ç¢¼", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ä¿æº«è¢‹æ‹‰éŠé‡‘è‰²é‚Šä¸­ç¢¼", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ä¿æº«è¢‹æ‹‰éŠé‡‘è‰²é‚Šå°ç¢¼", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "é­šä»”è±‰æ²¹ (é è¨‚æ·˜å¯¶)", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "å¤–è³£ç­·å­ (ç¨ç«‹åŒ…è£)", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "é£²ç®¡ (ç¨ç«‹åŒ…è£)", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ç´™æ¯+è“‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "å†°è¢‹æ ¼å­å†°", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "æµ·è†½è† è¢‹", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "é¤æ±ç´™", cat: "å…­ã€å¤–è³£ç¢—" }, { name: "ç‰™ç±¤ (ç¨ç«‹åŒ…è£)", cat: "å…­ã€å¤–è³£ç¢—" }
    ];

    // ç”Ÿæˆ ID (H001, H002...)
    products.forEach((p, index) => {
        p.id = "H" + (index + 1).toString().padStart(3, '0');
    });

    let cart = {}; 
    let cartModal = null;

    // === åˆå§‹åŒ– ===
    function init() {
        loadCart(); // è‡ªå‹•è®€å–è¨˜æ†¶
        renderNav();
        renderTable();
        cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
    }

    // === è¨˜æ†¶åŠŸèƒ½ ===
    function loadCart() {
        const savedCart = localStorage.getItem('orderCart_' + customerCode);
        if (savedCart) {
            try { cart = JSON.parse(savedCart); } catch(e) { console.error("Error", e); }
        }
        calculateTotal();
    }

    function saveCart() {
        localStorage.setItem('orderCart_' + customerCode, JSON.stringify(cart));
    }

    // === æ¸²æŸ“å°èˆª ===
    function renderNav() {
        const categories = [...new Set(products.map(p => p.cat))];
        const container = document.getElementById('navContainer');
        container.innerHTML = `<a href="javascript:void(0)" class="nav-btn active" onclick="filterCat('all', this)">å…¨éƒ¨</a>`;
        categories.forEach(cat => {
            const displayCat = cat.split('ã€')[1] || cat; 
            container.innerHTML += `<a href="#cat-${cat}" class="nav-btn" onclick="filterCat('${cat}', this)">${displayCat}</a>`;
        });
    }

    function filterCat(cat, btn) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if (cat === 'all') {
            document.querySelectorAll('.category-section').forEach(el => el.style.display = 'block');
            window.scrollTo(0, 0);
        } else {
            const target = document.getElementById(`cat-${cat}`);
            if (target) {
                const offset = 140; 
                const elementPosition = target.getBoundingClientRect().top + window.pageYOffset;
                window.scrollTo({ top: elementPosition - offset, behavior: "smooth" });
            }
        }
    }

    // === æ¸²æŸ“ç”¢å“åˆ—è¡¨ ===
    function renderTable(filterText = "") {
        const container = document.getElementById('product-list');
        let html = '';
        let currentCat = '';
        
        const filteredProducts = products.filter(p => {
            if (!filterText) return true;
            return p.name.includes(filterText);
        });

        filteredProducts.forEach(p => {
            if (!filterText && p.cat !== currentCat) {
                currentCat = p.cat;
                html += `<div class="category-header category-section" id="cat-${currentCat}">${currentCat}</div>`;
            }
            html += createRowHtml(p);
        });

        if (filteredProducts.length === 0) {
            html = '<div class="text-center p-5 text-muted">æ‰¾ä¸åˆ°ç›¸é—œç”¢å“</div>';
        }
        container.innerHTML = html;
    }

    function createRowHtml(p) {
        const qty = cart[p.id] || 0;
        const rowClass = qty > 0 ? 'selected' : '';
        // ç¢ºä¿ ID å”¯ä¸€ï¼Œé¿å…èˆ‡ Modal è¡çª
        return `
        <div class="product-row ${rowClass}" id="row-${p.id}">
            <div class="p-info">
                <div class="p-name">${p.name}</div>
                <div class="p-cat-label">${p.cat.split('ã€')[1] || p.cat}</div>
            </div>
            <div class="qty-control">
                <div class="qty-btn" onclick="updateQty('${p.id}', -1)">-</div>
                <input type="text" class="qty-input" id="qty-${p.id}" value="${qty}" readonly>
                <div class="qty-btn" onclick="updateQty('${p.id}', 1)">+</div>
            </div>
        </div>`;
    }

    function filterProducts() {
        const text = document.getElementById('searchInput').value;
        const clearBtn = document.getElementById('clearSearchBtn');
        clearBtn.style.display = text.length > 0 ? 'block' : 'none';
        renderTable(text);
    }

    function clearSearch() {
        document.getElementById('searchInput').value = '';
        document.getElementById('clearSearchBtn').style.display = 'none';
        renderTable('');
    }

    // === æ ¸å¿ƒæ›´æ–°é‚è¼¯ ===
    function updateQty(id, delta) {
        if (!cart[id]) cart[id] = 0;
        cart[id] += delta;
        if (cart[id] <= 0) delete cart[id];
        
        // åŒæ­¥ Main List
        const mainInput = document.getElementById(`qty-${id}`);
        if (mainInput) {
            mainInput.value = cart[id] || 0;
            const row = document.getElementById(`row-${id}`);
            if (cart[id] > 0) row.classList.add('selected');
            else row.classList.remove('selected');
        }

        // åŒæ­¥ Modal (å¦‚æœé–‹è‘—)
        if (document.getElementById('cartModal').classList.contains('show')) {
            renderCartModalItems();
        }
        
        saveCart();
        calculateTotal();
    }

    function calculateTotal() {
        let count = 0;
        for (let key in cart) count++; // è¨ˆç®—æ¬¾æ•¸ï¼Œéç¸½ä»¶æ•¸ï¼Œç¬¦åˆ V6 é‚è¼¯
        document.getElementById('totalQty').innerText = count;
        
        const btn = document.getElementById('viewCartBtn');
        if (count > 0) {
            btn.classList.add('active');
            btn.disabled = false;
            btn.innerHTML = `<i class="bi bi-cart-check-fill"></i> æŸ¥çœ‹å·²é¸ (${count})`;
        } else {
            btn.classList.remove('active');
            btn.disabled = true;
            btn.innerHTML = `<i class="bi bi-cart3"></i> æŸ¥çœ‹å·²é¸`;
        }
    }

    // === è³¼ç‰©è»Š Modal é‚è¼¯ ===
    function openCartModal() {
        renderCartModalItems();
        cartModal.show();
    }

    function renderCartModalItems() {
        const container = document.getElementById('cartModalBody');
        const items = products.filter(p => cart[p.id]);
        
        if (items.length === 0) {
            container.innerHTML = '<div class="text-center p-4 text-muted">å°šæœªé¸æ“‡ä»»ä½•ç”¢å“</div>';
            return;
        }

        let html = '';
        items.forEach(p => {
            // åœ¨ Modal ä¸­ä½¿ç”¨ç›¸åŒçš„ styleï¼Œä½† ID ä¸éœ€è¦é‡è¤‡ï¼Œå› ç‚º updateQty æœƒè™•ç†
            // ç‚ºäº†é¿å… ID è¡çªï¼ŒModal è£¡çš„ input ä¸è¨­ idï¼Œåªåšé¡¯ç¤º
            const qty = cart[p.id];
            html += `
            <div class="product-row selected">
                <div class="p-info">
                    <div class="p-name">${p.name}</div>
                </div>
                <div class="qty-control">
                    <div class="qty-btn" onclick="updateQty('${p.id}', -1)">-</div>
                    <input type="text" class="qty-input" value="${qty}" readonly>
                    <div class="qty-btn" onclick="updateQty('${p.id}', 1)">+</div>
                </div>
            </div>`;
        });
        container.innerHTML = html;
    }

    function clearCart() {
        if (Object.keys(cart).length === 0) return;
        if (confirm("ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å·²é¸è²¨å“å—ï¼Ÿ")) {
            cart = {};
            localStorage.removeItem('orderCart_' + customerCode);
            renderTable(); // é‡ç¹ªä¸»åˆ—è¡¨ç§»é™¤é¸ä¸­ç‹€æ…‹
            calculateTotal();
            renderCartModalItems(); // é‡ç¹ª Modal
        }
    }

    // === ç™¼é€ WhatsApp ===
    function sendWhatsApp() {
        if (Object.keys(cart).length === 0) {
            alert("è«‹å…ˆé¸æ“‡ç”¢å“ï¼");
            return;
        }

        let msg = `æµ·è†½ä»” è¨‚è²¨å–®ï¼š\n(å®¢æˆ¶ç·¨è™Ÿ: ${customerCode})\n`;
        msg += "------------------------\n";
        
        // ä¿æŒåŸåˆ†é¡é †åº
        const orderedCart = products.filter(p => cart[p.id]);
        
        orderedCart.forEach(p => {
            const q = cart[p.id];
            msg += ` ${q}  ${p.name}\n`; // æ ¼å¼: æ•¸é‡ åç¨±
        });

        msg += "------------------------\n";
        msg += "éº»ç…©æ™’ï¼"; 

        const phone = "85263771688";
        const url = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
        window.open(url, '_blank');
    }

    init();
</script>

</body>
</html>
